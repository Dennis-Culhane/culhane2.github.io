<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dennis P. Culhane - Academic Profile</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load configuration and shared code -->
    <script src="js/config.js"></script>
    <script src="js/data.js"></script>
</head>
<body class="bg-gray-100 min-h-screen">
    <!-- Navigation -->
    <nav class="bg-white shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex">
                    <div class="flex-shrink-0 flex items-center">
                        <h1 class="text-xl font-bold">Dennis P. Culhane</h1>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="#profile" class="text-gray-500 hover:text-gray-700">Profile</a>
                    <a href="#articles" class="text-gray-500 hover:text-gray-700">Articles</a>
                    <a href="admin.html" class="text-gray-500 hover:text-gray-700">Admin</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Profile Section -->
    <section id="profile" class="py-12 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="lg:flex lg:items-center lg:justify-between">
                <div class="lg:w-1/3">
                    <img src="https://www.sp2.upenn.edu/wp-content/uploads/2018/03/Culhane_Dennis.jpg" 
                         alt="Dennis P. Culhane" 
                         class="rounded-lg shadow-lg">
                </div>
                <div class="lg:w-2/3 lg:pl-12 mt-8 lg:mt-0">
                    <h2 class="text-3xl font-bold text-gray-900 mb-4">Dennis P. Culhane, Ph.D.</h2>
                    <p class="text-xl text-gray-600 mb-6">
                        Dana and Andrew Stone Chair in Social Policy
                        <br>Professor, School of Social Policy and Practice
                        <br>University of Pennsylvania
                    </p>
                    <div class="prose prose-lg text-gray-500">
                        <p class="mb-4">
                            Dennis P. Culhane is the Dana and Andrew Stone Chair in Social Policy at the University of Pennsylvania, 
                            School of Social Policy and Practice. His primary area of research is homelessness and assisted housing policy. 
                            His research has contributed to efforts to address the housing and support needs of people experiencing housing 
                            emergencies and long-term homelessness.
                        </p>
                        <p>
                            Dr. Culhane's recent research includes studies of vulnerable youth and young adults, including those experiencing 
                            homelessness, transitioning from foster care, and facing barriers to higher education access and success.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Articles Section -->
    <section id="articles" class="py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="mb-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">Research Articles</h2>
                
                <!-- Categories Filter -->
                <div class="mb-6">
                    <label for="category-filter" class="block text-sm font-medium text-gray-700 mb-2">Filter by Category</label>
                    <div class="flex flex-wrap gap-2" id="category-filters">
                        <!-- Categories will be dynamically added here -->
                    </div>
                </div>

                <!-- Search Box -->
                <div class="mb-6">
                    <label for="search" class="block text-sm font-medium text-gray-700 mb-2">Search Articles</label>
                    <input type="text" id="search" 
                           class="w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"
                           placeholder="Search by title, author, or abstract...">
                </div>
            </div>

            <!-- Articles List -->
            <div id="articles-list" class="space-y-4">
                <!-- Articles will be displayed here -->
            </div>
        </div>
    </section>

    <script>
        // 存储所有文章和当前过滤器状态
        let allArticles = [];
        let activeCategories = new Set();
        let searchTerm = '';

        // 初始化页面
        async function initializePage() {
            // 获取所有文章
            allArticles = await ArticlesManager.getArticles();
            
            // 提取所有唯一的分类
            const categories = new Set();
            allArticles.forEach(article => {
                if (article.categories) {
                    article.categories.forEach(category => categories.add(category));
                }
            });

            // 渲染分类过滤器
            const filterContainer = document.getElementById('category-filters');
            categories.forEach(category => {
                const button = document.createElement('button');
                button.className = 'px-3 py-1 rounded-full border border-gray-300 text-sm hover:bg-gray-100';
                button.textContent = category;
                button.onclick = () => toggleCategory(category, button);
                filterContainer.appendChild(button);
            });

            // 设置搜索监听器
            document.getElementById('search').addEventListener('input', (e) => {
                searchTerm = e.target.value.toLowerCase();
                filterAndRenderArticles();
            });

            // 初始渲染文章
            filterAndRenderArticles();
        }

        // 切换分类过滤器
        function toggleCategory(category, button) {
            if (activeCategories.has(category)) {
                activeCategories.delete(category);
                button.classList.remove('bg-blue-500', 'text-white');
                button.classList.add('bg-white', 'text-gray-700');
            } else {
                activeCategories.add(category);
                button.classList.remove('bg-white', 'text-gray-700');
                button.classList.add('bg-blue-500', 'text-white');
            }
            filterAndRenderArticles();
        }

        // 过滤并渲染文章
        function filterAndRenderArticles() {
            let filteredArticles = allArticles;

            // 应用分类过滤
            if (activeCategories.size > 0) {
                filteredArticles = filteredArticles.filter(article => 
                    article.categories && 
                    article.categories.some(category => activeCategories.has(category))
                );
            }

            // 应用搜索过滤
            if (searchTerm) {
                filteredArticles = filteredArticles.filter(article => 
                    article.title.toLowerCase().includes(searchTerm) ||
                    article.authors.toLowerCase().includes(searchTerm) ||
                    (article.abstract && article.abstract.toLowerCase().includes(searchTerm))
                );
            }

            // 渲染过滤后的文章
            const container = document.getElementById('articles-list');
            if (filteredArticles.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center">No articles found matching your criteria.</p>';
                return;
            }

            // 按日期排序
            filteredArticles.sort((a, b) => new Date(b.date) - new Date(a.date));

            container.innerHTML = filteredArticles.map(article => `
                <div class="bg-white rounded-lg shadow-md p-6 mb-4">
                    <h3 class="text-xl font-bold mb-2">${article.title || 'Untitled'}</h3>
                    <p class="text-gray-600 mb-2">Authors: ${article.authors || 'Unknown'}</p>
                    <p class="text-gray-600 mb-2">Date: ${article.date || 'No date'}</p>
                    ${article.categories && article.categories.length > 0 ? 
                        `<p class="text-gray-600 mb-2">Categories: ${article.categories.join(', ')}</p>` : ''}
                    <p class="text-gray-700 mb-4">${article.abstract || 'No abstract available'}</p>
                    <div class="flex justify-between items-center">
                        <a href="${article.pdfUrl}" target="_blank" 
                           class="text-blue-600 hover:text-blue-800">
                            View PDF
                        </a>
                    </div>
                </div>
            `).join('');
        }

        // 初始化页面
        document.addEventListener('DOMContentLoaded', initializePage);
    </script>
</body>
</html> 